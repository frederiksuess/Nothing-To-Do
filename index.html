<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="theme-color" content="#000000">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<title>Nothing · Notes & Tasks</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">

<style>
/* ══════════════════════════════════════
   DESIGN TOKENS — Nothing OS Aesthetic
══════════════════════════════════════ */
:root {
  --bg:       #000000;
  --bg-1:     #0a0a0a;
  --bg-2:     #111111;
  --bg-3:     #1a1a1a;
  --border:   #222222;
  --border-2: #333333;
  --text:     #ffffff;
  --text-2:   #888888;
  --text-3:   #444444;
  --red:      #ff2d2d;
  --red-dim:  #3d0000;
  --mono:     'Space Mono', monospace;
  --sans:     'DM Sans', sans-serif;
  --radius:   2px;
  --sidebar:  280px;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
  height: 100%;
  background: var(--bg);
  color: var(--text);
  font-family: var(--sans);
  font-size: 14px;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  overflow: hidden;
}

/* ══════════════════════════════════════
   LAYOUT
══════════════════════════════════════ */
#app {
  display: grid;
  grid-template-columns: var(--sidebar) 1fr;
  grid-template-rows: 48px 1fr;
  height: 100dvh;
}

/* ══════════════════════════════════════
   TOPBAR
══════════════════════════════════════ */
#topbar {
  grid-column: 1 / -1;
  display: flex;
  align-items: center;
  padding: 0 16px;
  border-bottom: 1px solid var(--border);
  gap: 12px;
  position: relative;
  z-index: 100;
}

#topbar .logo {
  font-family: var(--mono);
  font-size: 11px;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  color: var(--text-2);
  user-select: none;
  flex-shrink: 0;
}
#topbar .logo span { color: var(--red); }

#topbar .sep {
  width: 1px;
  height: 20px;
  background: var(--border);
  flex-shrink: 0;
}

#tab-bar {
  display: flex;
  gap: 2px;
  flex: 1;
}

.tab-btn {
  font-family: var(--mono);
  font-size: 10px;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--text-3);
  background: none;
  border: none;
  cursor: pointer;
  padding: 6px 12px;
  border-radius: var(--radius);
  transition: color 0.15s, background 0.15s;
}
.tab-btn:hover { color: var(--text-2); background: var(--bg-2); }
.tab-btn.active { color: var(--text); background: var(--bg-3); }
.tab-btn .count {
  display: inline-block;
  background: var(--red);
  color: #fff;
  font-size: 9px;
  border-radius: 2px;
  padding: 1px 4px;
  margin-left: 5px;
  vertical-align: middle;
}

#topbar .actions {
  display: flex;
  gap: 6px;
  margin-left: auto;
  flex-shrink: 0;
}

.icon-btn {
  background: none;
  border: 1px solid var(--border);
  color: var(--text-2);
  cursor: pointer;
  width: 30px;
  height: 30px;
  border-radius: var(--radius);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  transition: color 0.15s, border-color 0.15s;
}
.icon-btn:hover { color: var(--text); border-color: var(--border-2); }
.icon-btn.red { border-color: var(--red); color: var(--red); }

/* ══════════════════════════════════════
   SIDEBAR — NOTE LIST
══════════════════════════════════════ */
#sidebar {
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

#sidebar-header {
  padding: 12px 14px 10px;
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  gap: 8px;
}
#sidebar-header .label {
  font-family: var(--mono);
  font-size: 9px;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  color: var(--text-3);
  flex: 1;
}

#note-search {
  background: var(--bg-2);
  border: 1px solid var(--border);
  color: var(--text);
  font-family: var(--sans);
  font-size: 13px;
  padding: 7px 12px;
  margin: 10px 12px 8px;
  border-radius: var(--radius);
  outline: none;
  width: calc(100% - 24px);
  transition: border-color 0.15s;
}
#note-search::placeholder { color: var(--text-3); }
#note-search:focus { border-color: var(--border-2); }

#note-list {
  flex: 1;
  overflow-y: auto;
  padding: 4px 0;
}
#note-list::-webkit-scrollbar { width: 3px; }
#note-list::-webkit-scrollbar-thumb { background: var(--border-2); border-radius: 2px; }

.note-item {
  padding: 9px 14px;
  cursor: pointer;
  border-left: 2px solid transparent;
  transition: background 0.1s, border-color 0.1s;
  position: relative;
}
.note-item:hover { background: var(--bg-2); }
.note-item.active {
  background: var(--bg-2);
  border-left-color: var(--red);
}
.note-item.active .note-item-title { color: var(--text); }

.note-item-title {
  font-family: var(--mono);
  font-size: 11px;
  color: var(--text-2);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-bottom: 2px;
}
.note-item-preview {
  font-size: 11px;
  color: var(--text-3);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.note-item-date {
  font-family: var(--mono);
  font-size: 9px;
  color: var(--text-3);
  margin-top: 3px;
}
.note-item .del-btn {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: var(--text-3);
  cursor: pointer;
  font-size: 14px;
  opacity: 0;
  transition: opacity 0.15s, color 0.15s;
  padding: 4px;
  line-height: 1;
}
.note-item:hover .del-btn { opacity: 1; }
.note-item .del-btn:hover { color: var(--red); }

/* ══════════════════════════════════════
   MAIN CONTENT AREA
══════════════════════════════════════ */
#main {
  display: flex;
  flex-direction: column;
  overflow: hidden;
  position: relative;
}

/* ══════════════════════════════════════
   TABS: TASKS vs NOTES
══════════════════════════════════════ */
/* Todo-Panel */
#todo-panel {
  display: none;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
}
#todo-panel.visible { display: flex; }

/* Notes-Panel */
#notes-panel {
  display: none;
  height: 100%;
  overflow: hidden;
}
#notes-panel.visible { display: flex; }

/* ══════════════════════════════════════
   TODO PANEL
══════════════════════════════════════ */
#todo-list-area {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
}
#todo-list-area::-webkit-scrollbar { width: 3px; }
#todo-list-area::-webkit-scrollbar-thumb { background: var(--border-2); border-radius: 2px; }

.todo-section-label {
  font-family: var(--mono);
  font-size: 9px;
  letter-spacing: 0.25em;
  text-transform: uppercase;
  color: var(--text-3);
  padding: 16px 0 8px;
  border-bottom: 1px solid var(--border);
  margin-bottom: 8px;
}
.todo-section-label:first-child { padding-top: 0; }

.todo-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 10px 0;
  border-bottom: 1px solid var(--border);
  cursor: pointer;
  transition: opacity 0.15s;
}
.todo-item:hover { opacity: 0.85; }

.todo-check {
  width: 16px;
  height: 16px;
  border: 1px solid var(--border-2);
  border-radius: var(--radius);
  flex-shrink: 0;
  margin-top: 1px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.15s, border-color 0.15s;
}
.todo-item.done .todo-check {
  background: var(--red);
  border-color: var(--red);
}
.todo-item.done .todo-check::after { content: '✕'; font-size: 9px; color: #fff; }
.todo-item.done .todo-text { text-decoration: line-through; color: var(--text-3); }

.todo-text {
  flex: 1;
  font-size: 14px;
  color: var(--text-2);
  line-height: 1.4;
  word-break: break-word;
}
.todo-cat {
  font-family: var(--mono);
  font-size: 9px;
  letter-spacing: 0.1em;
  color: var(--text-3);
  border: 1px solid var(--border);
  padding: 2px 6px;
  border-radius: 1px;
  flex-shrink: 0;
}
.todo-item .del-todo {
  background: none;
  border: none;
  color: var(--text-3);
  cursor: pointer;
  font-size: 14px;
  opacity: 0;
  transition: opacity 0.15s, color 0.15s;
  padding: 2px;
  flex-shrink: 0;
}
.todo-item:hover .del-todo { opacity: 1; }
.todo-item .del-todo:hover { color: var(--red); }

/* New Todo Bar */
#new-todo-bar {
  padding: 12px 16px;
  border-top: 1px solid var(--border);
  display: flex;
  gap: 8px;
  align-items: center;
  background: var(--bg);
}
#new-todo-input {
  flex: 1;
  background: var(--bg-2);
  border: 1px solid var(--border);
  color: var(--text);
  font-family: var(--sans);
  font-size: 14px;
  padding: 9px 12px;
  border-radius: var(--radius);
  outline: none;
  transition: border-color 0.15s;
}
#new-todo-input::placeholder { color: var(--text-3); }
#new-todo-input:focus { border-color: var(--border-2); }

#cat-select {
  background: var(--bg-2);
  border: 1px solid var(--border);
  color: var(--text-2);
  font-family: var(--mono);
  font-size: 10px;
  padding: 9px 10px;
  border-radius: var(--radius);
  outline: none;
  cursor: pointer;
  letter-spacing: 0.1em;
}

/* ══════════════════════════════════════
   NOTES EDITOR
══════════════════════════════════════ */
#notes-panel {
  display: none;
  height: 100%;
  flex-direction: row;
}
#notes-panel.visible { display: flex; }

/* Empty state */
#note-empty {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 10px;
  color: var(--text-3);
}
#note-empty .icon { font-size: 40px; opacity: 0.3; }
#note-empty .hint { font-family: var(--mono); font-size: 10px; letter-spacing: 0.2em; text-transform: uppercase; }
#note-empty .sub { font-size: 12px; color: var(--text-3); }

/* Editor area */
#editor-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-width: 0;
  overflow: hidden;
}

#editor-toolbar {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 8px 14px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.tool-btn {
  background: none;
  border: 1px solid transparent;
  color: var(--text-3);
  cursor: pointer;
  width: 26px;
  height: 26px;
  border-radius: var(--radius);
  font-family: var(--mono);
  font-size: 11px;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: color 0.12s, background 0.12s;
}
.tool-btn:hover { color: var(--text); background: var(--bg-2); }
.tool-sep { width: 1px; height: 18px; background: var(--border); margin: 0 2px; }

#note-title-input {
  background: none;
  border: none;
  color: var(--text);
  font-family: var(--mono);
  font-size: 16px;
  font-weight: 700;
  padding: 14px 16px 10px;
  outline: none;
  width: 100%;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
  letter-spacing: 0.02em;
}
#note-title-input::placeholder { color: var(--text-3); }

/* Edit / Preview split */
#editor-body {
  flex: 1;
  display: grid;
  grid-template-columns: 1fr;
  overflow: hidden;
  position: relative;
}
#editor-body.split { grid-template-columns: 1fr 1fr; }
#editor-body.split #md-preview { display: block; }
#editor-body.split .editor-gutter { border-right: 1px solid var(--border); }

/* Textarea */
#md-editor {
  resize: none;
  background: var(--bg);
  border: none;
  color: var(--text-2);
  font-family: var(--mono);
  font-size: 13px;
  line-height: 1.75;
  padding: 16px;
  outline: none;
  overflow-y: auto;
  tab-size: 2;
}
#md-editor::-webkit-scrollbar { width: 3px; }
#md-editor::-webkit-scrollbar-thumb { background: var(--border-2); border-radius: 2px; }

/* Wiki link highlight in textarea — overlay approach */
.editor-gutter {
  position: relative;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
#md-editor { flex: 1; }

/* Preview */
#md-preview {
  display: none;
  overflow-y: auto;
  padding: 16px 20px;
  color: var(--text-2);
  font-size: 14px;
  line-height: 1.75;
}
#md-preview::-webkit-scrollbar { width: 3px; }
#md-preview::-webkit-scrollbar-thumb { background: var(--border-2); border-radius: 2px; }

/* Markdown render styles */
#md-preview h1, #md-preview h2, #md-preview h3 {
  font-family: var(--mono);
  color: var(--text);
  margin: 1.2em 0 0.4em;
}
#md-preview h1 { font-size: 18px; border-bottom: 1px solid var(--border); padding-bottom: 6px; }
#md-preview h2 { font-size: 15px; }
#md-preview h3 { font-size: 13px; color: var(--text-2); }
#md-preview p { margin: 0.5em 0; }
#md-preview strong { color: var(--text); font-weight: 600; }
#md-preview em { font-style: italic; color: var(--text-2); }
#md-preview code {
  background: var(--bg-2);
  border: 1px solid var(--border);
  padding: 1px 5px;
  border-radius: 2px;
  font-family: var(--mono);
  font-size: 12px;
  color: var(--red);
}
#md-preview pre {
  background: var(--bg-2);
  border: 1px solid var(--border);
  padding: 12px;
  border-radius: 2px;
  overflow-x: auto;
  margin: 0.8em 0;
}
#md-preview pre code { background: none; border: none; padding: 0; font-size: 12px; color: var(--text-2); }
#md-preview ul, #md-preview ol { padding-left: 20px; margin: 0.5em 0; }
#md-preview li { margin: 0.25em 0; }
#md-preview blockquote {
  border-left: 2px solid var(--red);
  padding-left: 12px;
  color: var(--text-3);
  margin: 0.8em 0;
}
#md-preview hr { border: none; border-top: 1px solid var(--border); margin: 1.5em 0; }
#md-preview a { color: var(--text-2); text-decoration: underline; text-underline-offset: 2px; }

/* Wiki link in preview */
.wiki-link {
  color: var(--red) !important;
  text-decoration: none !important;
  font-family: var(--mono);
  font-size: 0.9em;
  border-bottom: 1px dotted var(--red);
  cursor: pointer;
  transition: opacity 0.12s;
}
.wiki-link:hover { opacity: 0.75; }
.wiki-link.new-note { color: var(--text-3) !important; border-bottom-color: var(--text-3); }

/* ══════════════════════════════════════
   AUTOCOMPLETE POPUP
══════════════════════════════════════ */
#autocomplete {
  position: fixed;
  background: var(--bg-1);
  border: 1px solid var(--border-2);
  border-radius: 3px;
  z-index: 999;
  min-width: 200px;
  max-width: 320px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.8);
  overflow: hidden;
  display: none;
}
#autocomplete.visible { display: block; }
.ac-header {
  padding: 6px 12px 4px;
  font-family: var(--mono);
  font-size: 9px;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  color: var(--text-3);
  border-bottom: 1px solid var(--border);
}
.ac-item {
  padding: 8px 12px;
  cursor: pointer;
  font-family: var(--mono);
  font-size: 12px;
  color: var(--text-2);
  display: flex;
  align-items: center;
  gap: 8px;
  transition: background 0.1s;
}
.ac-item:hover, .ac-item.selected { background: var(--bg-3); color: var(--text); }
.ac-item .ac-icon { color: var(--red); font-size: 11px; opacity: 0.7; }
.ac-item.create-new { color: var(--text-3); }
.ac-item.create-new .ac-icon { color: var(--text-3); }
.ac-item.create-new:hover { color: var(--text-2); }

/* ══════════════════════════════════════
   DONE PANEL & BACKLINKS
══════════════════════════════════════ */
#backlinks-panel {
  width: 220px;
  border-left: 1px solid var(--border);
  display: none;
  flex-direction: column;
  overflow: hidden;
  flex-shrink: 0;
}
#backlinks-panel.visible { display: flex; }
#backlinks-panel .bl-header {
  padding: 10px 12px;
  font-family: var(--mono);
  font-size: 9px;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  color: var(--text-3);
  border-bottom: 1px solid var(--border);
}
#backlinks-list {
  flex: 1;
  overflow-y: auto;
  padding: 8px 0;
}
.bl-item {
  padding: 7px 12px;
  cursor: pointer;
  font-size: 12px;
  color: var(--text-3);
  display: flex;
  align-items: center;
  gap: 6px;
  transition: color 0.1s, background 0.1s;
}
.bl-item:hover { color: var(--text-2); background: var(--bg-2); }
.bl-item .bl-arrow { color: var(--red); font-size: 10px; }

/* ══════════════════════════════════════
   SYNC STATUS
══════════════════════════════════════ */
#sync-status {
  font-family: var(--mono);
  font-size: 9px;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  color: var(--text-3);
  display: flex;
  align-items: center;
  gap: 6px;
  margin-left: 4px;
}
.sync-dot {
  width: 5px;
  height: 5px;
  border-radius: 50%;
  background: var(--text-3);
  flex-shrink: 0;
}
.sync-dot.ok { background: #2d9e47; }
.sync-dot.busy { background: var(--red); animation: pulse 1s infinite; }
@keyframes pulse { 0%,100% { opacity: 1; } 50% { opacity: 0.3; } }

/* ══════════════════════════════════════
   DRIVE SETUP MODAL
══════════════════════════════════════ */
#modal-overlay {
  position: fixed; inset: 0;
  background: rgba(0,0,0,0.88);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  display: none;
}
#modal-overlay.visible { display: flex; }
#modal-box {
  background: var(--bg-1);
  border: 1px solid var(--border-2);
  padding: 28px;
  max-width: 420px;
  width: 90%;
  border-radius: 2px;
}
#modal-box h2 {
  font-family: var(--mono);
  font-size: 13px;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--text);
  margin-bottom: 8px;
}
#modal-box p { font-size: 13px; color: var(--text-2); margin-bottom: 16px; line-height: 1.6; }
#modal-box label {
  font-family: var(--mono);
  font-size: 10px;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  color: var(--text-3);
  display: block;
  margin-bottom: 6px;
}
#modal-box input {
  width: 100%;
  background: var(--bg-2);
  border: 1px solid var(--border-2);
  color: var(--text);
  font-family: var(--mono);
  font-size: 12px;
  padding: 10px;
  border-radius: var(--radius);
  outline: none;
  margin-bottom: 16px;
}
.modal-btns { display: flex; gap: 8px; justify-content: flex-end; }
.btn-primary {
  background: var(--red);
  border: none;
  color: #fff;
  font-family: var(--mono);
  font-size: 10px;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  padding: 10px 18px;
  border-radius: var(--radius);
  cursor: pointer;
  transition: opacity 0.15s;
}
.btn-primary:hover { opacity: 0.85; }
.btn-secondary {
  background: none;
  border: 1px solid var(--border-2);
  color: var(--text-2);
  font-family: var(--mono);
  font-size: 10px;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  padding: 10px 18px;
  border-radius: var(--radius);
  cursor: pointer;
  transition: border-color 0.15s;
}
.btn-secondary:hover { border-color: var(--text-2); }

/* ══════════════════════════════════════
   RESPONSIVENESS
══════════════════════════════════════ */
@media (max-width: 680px) {
  :root { --sidebar: 0px; }
  #sidebar { display: none; }
  #sidebar.mobile-visible {
    display: flex;
    position: fixed;
    left: 0; top: 48px; bottom: 0;
    width: 280px;
    z-index: 200;
    background: var(--bg-1);
    border-right: 1px solid var(--border-2);
  }
  #app { grid-template-columns: 1fr; }
  #editor-body.split { grid-template-columns: 1fr; }
  #editor-body.split #md-preview { display: none; }
}

/* ══════════════════════════════════════
   MISC
══════════════════════════════════════ */
::selection { background: var(--red); color: #fff; }
</style>
</head>
<body>

<div id="app">

  <!-- TOPBAR -->
  <div id="topbar">
    <div class="logo">N<span>·</span>OS</div>
    <div class="sep"></div>
    <div id="tab-bar">
      <button class="tab-btn active" id="tab-privat" onclick="switchTab('privat')">
        Privat <span class="count" id="count-privat">0</span>
      </button>
      <button class="tab-btn" id="tab-arbeit" onclick="switchTab('arbeit')">
        Arbeit <span class="count" id="count-arbeit">0</span>
      </button>
      <button class="tab-btn" id="tab-done" onclick="switchTab('done')">Done</button>
      <button class="tab-btn" id="tab-notes" onclick="switchTab('notes')">
        Notizen <span class="count" id="count-notes">0</span>
      </button>
    </div>
    <div id="sync-status">
      <div class="sync-dot" id="sync-dot"></div>
      <span id="sync-label">lokal</span>
    </div>
    <div class="actions">
      <button class="icon-btn" title="Google Drive verbinden" onclick="showDriveModal()">☁</button>
      <button class="icon-btn" title="Neue Notiz / Aufgabe (N)" onclick="handleNew()">+</button>
    </div>
  </div>

  <!-- SIDEBAR (Note List) -->
  <div id="sidebar">
    <div id="sidebar-header">
      <span class="label">Notizen</span>
      <button class="icon-btn" style="width:22px;height:22px;font-size:12px" onclick="createNewNote()" title="Neue Notiz">+</button>
    </div>
    <input type="text" id="note-search" placeholder="Suchen …" oninput="filterNotes(this.value)">
    <div id="note-list"></div>
  </div>

  <!-- MAIN -->
  <div id="main">

    <!-- TODO PANELS -->
    <div id="todo-panel" class="visible">
      <div id="todo-list-area"></div>
      <div id="new-todo-bar">
        <input id="new-todo-input" type="text" placeholder="Neue Aufgabe …"
               onkeydown="if(event.key==='Enter') addTodo()">
        <select id="cat-select">
          <option value="privat">Privat</option>
          <option value="arbeit">Arbeit</option>
        </select>
        <button class="icon-btn" onclick="addTodo()" title="Hinzufügen">↵</button>
      </div>
    </div>

    <!-- NOTES PANEL -->
    <div id="notes-panel">
      <!-- Empty state -->
      <div id="note-empty">
        <div class="icon">◈</div>
        <div class="hint">Keine Notiz ausgewählt</div>
        <div class="sub">Wähle eine Notiz links oder erstelle eine neue</div>
      </div>

      <!-- Editor -->
      <div id="editor-area" style="display:none">
        <div id="editor-toolbar">
          <button class="tool-btn" onclick="wrapSelection('**','**')" title="Fett">B</button>
          <button class="tool-btn" style="font-style:italic" onclick="wrapSelection('*','*')" title="Kursiv">I</button>
          <button class="tool-btn" onclick="wrapSelection('`','`')" title="Code">`</button>
          <div class="tool-sep"></div>
          <button class="tool-btn" onclick="insertLine('## ')" title="Überschrift H2">H2</button>
          <button class="tool-btn" onclick="insertLine('### ')" title="Überschrift H3">H3</button>
          <div class="tool-sep"></div>
          <button class="tool-btn" onclick="insertLine('- ')" title="Liste">—</button>
          <button class="tool-btn" onclick="insertLine('> ')" title="Zitat">»</button>
          <div class="tool-sep"></div>
          <button class="tool-btn" onclick="insertWikiLink()" title="Notiz verlinken">[[</button>
          <div class="tool-sep"></div>
          <button class="tool-btn" id="split-btn" onclick="toggleSplit()" title="Vorschau">⊞</button>
          <div class="tool-sep"></div>
          <button class="tool-btn" id="bl-btn" onclick="toggleBacklinks()" title="Rückverlinkungen">←</button>
        </div>
        <input type="text" id="note-title-input" placeholder="Titel der Notiz …"
               oninput="onTitleChange(this.value)">
        <div id="editor-body">
          <div class="editor-gutter">
            <textarea id="md-editor" spellcheck="true" placeholder="Schreibe hier …&#10;&#10;Verlinke Notizen mit [[Notizname]]&#10;Die Notiz wird automatisch angelegt."></textarea>
          </div>
          <div id="md-preview"></div>
        </div>
      </div>

      <!-- Backlinks -->
      <div id="backlinks-panel">
        <div class="bl-header">Rückverlinkungen</div>
        <div id="backlinks-list"></div>
      </div>
    </div>

  </div>
</div>

<!-- AUTOCOMPLETE POPUP -->
<div id="autocomplete">
  <div class="ac-header">Notiz auswählen oder erstellen</div>
  <div id="ac-items"></div>
</div>

<!-- DRIVE MODAL -->
<div id="modal-overlay">
  <div id="modal-box">
    <h2>Google Drive Sync</h2>
    <p>Trage deine Google API Client ID ein, um Notizen und Aufgaben automatisch in deinem Drive zu speichern.</p>
    <label for="client-id-input">Google API Client ID</label>
    <input id="client-id-input" type="text" placeholder="xxxxxxxx.apps.googleusercontent.com">
    <p style="font-size:11px;color:var(--text-3);margin-top:-10px;margin-bottom:16px">
      → <a href="https://console.cloud.google.com/apis/credentials" target="_blank" style="color:var(--text-3)">console.cloud.google.com</a> · Neues OAuth-Credential erstellen · Typ: Web-Anwendung · Redirect: dieser Ursprung
    </p>
    <div class="modal-btns">
      <button class="btn-secondary" onclick="closeModal()">Abbrechen</button>
      <button class="btn-primary" onclick="saveClientId()">Verbinden</button>
    </div>
  </div>
</div>

<script>
/* ════════════════════════════════════════════════
   NOTHING TO-DO + NOTES
   v3.0 — Wiki-Links, Markdown-Editor, Drive Sync
════════════════════════════════════════════════ */

// ─── STATE ─────────────────────────────────────
let state = {
  todos: [],          // {id, text, cat, done, createdAt}
  notes: {},          // {[id]: {id, title, content, updatedAt}}
  activeTab: 'privat',
  activeNoteId: null,
  splitView: false,
  backlinksVisible: false,
  driveClientId: null,
  driveToken: null,
  driveFileId: null,   // ID der data.json im Drive
};

// ─── PERSISTENCE ─────────────────────────────
const LS_KEY = 'nothing_v3';

function saveLocal() {
  localStorage.setItem(LS_KEY, JSON.stringify({ todos: state.todos, notes: state.notes }));
  if (state.driveToken) scheduleDriveSync();
}

function loadLocal() {
  try {
    const raw = localStorage.getItem(LS_KEY);
    if (!raw) return;
    const d = JSON.parse(raw);
    state.todos = d.todos || [];
    state.notes = d.notes || {};
  } catch(e) {}
}

// ─── GOOGLE DRIVE ────────────────────────────
const DRIVE_FILE = 'nothing-notes-data.json';
const SCOPES = 'https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/drive.file';
let driveTimer = null;

function scheduleDriveSync() {
  clearTimeout(driveTimer);
  driveTimer = setTimeout(driveSave, 2000);
}

function setSyncStatus(state_) {
  const dot = document.getElementById('sync-dot');
  const label = document.getElementById('sync-label');
  dot.className = 'sync-dot' + (state_ === 'ok' ? ' ok' : state_ === 'busy' ? ' busy' : '');
  label.textContent = state_ === 'ok' ? 'drive ✓' : state_ === 'busy' ? 'speichern …' : 'lokal';
}

function showDriveModal() {
  document.getElementById('client-id-input').value = state.driveClientId || '';
  document.getElementById('modal-overlay').classList.add('visible');
}
function closeModal() {
  document.getElementById('modal-overlay').classList.remove('visible');
}
function saveClientId() {
  const id = document.getElementById('client-id-input').value.trim();
  if (!id) return;
  state.driveClientId = id;
  localStorage.setItem('drive_client_id', id);
  closeModal();
  driveAuth();
}

function driveAuth() {
  if (!state.driveClientId) return;
  const params = new URLSearchParams({
    client_id: state.driveClientId,
    redirect_uri: location.origin + location.pathname,
    response_type: 'token',
    scope: SCOPES,
    prompt: 'select_account',
  });
  const popup = window.open('https://accounts.google.com/o/oauth2/auth?' + params, '_blank', 'width=500,height=600');
  const iv = setInterval(() => {
    try {
      const url = popup.location.href;
      if (url.includes('access_token')) {
        const hash = new URLSearchParams(popup.location.hash.slice(1));
        state.driveToken = hash.get('access_token');
        popup.close();
        clearInterval(iv);
        driveLoad();
      }
    } catch(e) {}
    if (popup.closed) clearInterval(iv);
  }, 300);
}

async function driveLoad() {
  setSyncStatus('busy');
  try {
    // Find existing file
    const res = await fetch(
      `https://www.googleapis.com/drive/v3/files?q=name='${DRIVE_FILE}' and trashed=false&fields=files(id,name)`,
      { headers: { Authorization: 'Bearer ' + state.driveToken } }
    );
    const data = await res.json();
    if (data.files && data.files.length > 0) {
      state.driveFileId = data.files[0].id;
      const content = await fetch(
        `https://www.googleapis.com/drive/v3/files/${state.driveFileId}?alt=media`,
        { headers: { Authorization: 'Bearer ' + state.driveToken } }
      );
      const json = await content.json();
      state.todos = json.todos || [];
      state.notes = json.notes || {};
      saveLocal();
      render();
    }
    setSyncStatus('ok');
  } catch(e) { setSyncStatus(''); }
}

async function driveSave() {
  if (!state.driveToken) return;
  setSyncStatus('busy');
  const body = JSON.stringify({ todos: state.todos, notes: state.notes });
  try {
    if (state.driveFileId) {
      await fetch(
        `https://www.googleapis.com/upload/drive/v3/files/${state.driveFileId}?uploadType=media`,
        { method: 'PATCH', headers: { Authorization: 'Bearer ' + state.driveToken, 'Content-Type': 'application/json' }, body }
      );
    } else {
      const meta = await fetch(
        'https://www.googleapis.com/drive/v3/files',
        { method: 'POST', headers: { Authorization: 'Bearer ' + state.driveToken, 'Content-Type': 'application/json' },
          body: JSON.stringify({ name: DRIVE_FILE }) }
      );
      const mj = await meta.json();
      state.driveFileId = mj.id;
      await fetch(
        `https://www.googleapis.com/upload/drive/v3/files/${state.driveFileId}?uploadType=media`,
        { method: 'PATCH', headers: { Authorization: 'Bearer ' + state.driveToken, 'Content-Type': 'application/json' }, body }
      );
    }
    setSyncStatus('ok');
  } catch(e) { setSyncStatus(''); }
}

// ─── TABS ────────────────────────────────────
function switchTab(tab) {
  state.activeTab = tab;
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  document.getElementById('tab-' + tab).classList.add('active');

  const todoPanel = document.getElementById('todo-panel');
  const notesPanel = document.getElementById('notes-panel');

  if (tab === 'notes') {
    todoPanel.classList.remove('visible');
    notesPanel.classList.add('visible');
    renderSidebar();
  } else {
    todoPanel.classList.add('visible');
    notesPanel.classList.remove('visible');
    renderTodos();
  }
}

// ─── TODOS ───────────────────────────────────
function generateId() {
  return Date.now().toString(36) + Math.random().toString(36).slice(2, 6);
}

function addTodo() {
  const input = document.getElementById('new-todo-input');
  const text = input.value.trim();
  if (!text) return;
  const cat = document.getElementById('cat-select').value;
  state.todos.unshift({ id: generateId(), text, cat, done: false, createdAt: Date.now() });
  input.value = '';
  saveLocal();
  renderTodos();
}

function toggleTodo(id) {
  const t = state.todos.find(t => t.id === id);
  if (t) { t.done = !t.done; saveLocal(); renderTodos(); }
}

function deleteTodo(id) {
  state.todos = state.todos.filter(t => t.id !== id);
  saveLocal(); renderTodos();
}

function renderTodos() {
  const area = document.getElementById('todo-list-area');
  const tab = state.activeTab;
  let items;
  if (tab === 'done') {
    items = state.todos.filter(t => t.done);
  } else {
    items = state.todos.filter(t => !t.done && t.cat === tab);
  }

  // Update counts
  ['privat','arbeit'].forEach(cat => {
    document.getElementById('count-' + cat).textContent =
      state.todos.filter(t => !t.done && t.cat === cat).length;
  });
  document.getElementById('count-notes').textContent = Object.keys(state.notes).length;

  if (items.length === 0) {
    area.innerHTML = `<div style="padding:40px 16px;text-align:center;color:var(--text-3);font-family:var(--mono);font-size:11px;letter-spacing:0.2em">KEINE AUFGABEN</div>`;
    return;
  }

  area.innerHTML = items.map(t => `
    <div class="todo-item${t.done ? ' done' : ''}" onclick="toggleTodo('${t.id}')">
      <div class="todo-check"></div>
      <div class="todo-text">${escHtml(t.text)}</div>
      ${tab !== 'done' ? '' : `<div class="todo-cat">${t.cat}</div>`}
      <button class="del-todo" onclick="event.stopPropagation();deleteTodo('${t.id}')" title="Löschen">×</button>
    </div>
  `).join('');
}

// ─── NOTES ───────────────────────────────────
function allNotes() {
  return Object.values(state.notes).sort((a, b) => (b.updatedAt || 0) - (a.updatedAt || 0));
}

function createNewNote(title = '') {
  const id = generateId();
  state.notes[id] = { id, title: title || 'Neue Notiz', content: '', updatedAt: Date.now() };
  saveLocal();
  renderSidebar();
  openNote(id);
  if (!title) {
    const ti = document.getElementById('note-title-input');
    ti.select();
  }
}

function deleteNote(id) {
  if (!confirm('Notiz löschen?')) return;
  delete state.notes[id];
  if (state.activeNoteId === id) {
    state.activeNoteId = null;
    showNoteEmpty();
  }
  saveLocal();
  renderSidebar();
}

function openNote(id) {
  if (!state.notes[id]) return;
  state.activeNoteId = id;
  const note = state.notes[id];

  document.getElementById('note-empty').style.display = 'none';
  document.getElementById('editor-area').style.display = 'flex';

  document.getElementById('note-title-input').value = note.title;
  document.getElementById('md-editor').value = note.content || '';

  renderSidebar();
  updatePreview();
  updateBacklinks();
}

function showNoteEmpty() {
  document.getElementById('note-empty').style.display = '';
  document.getElementById('editor-area').style.display = 'none';
}

function onTitleChange(val) {
  if (!state.activeNoteId) return;
  state.notes[state.activeNoteId].title = val;
  state.notes[state.activeNoteId].updatedAt = Date.now();
  saveLocal();
  renderSidebar();
}

function filterNotes(q) {
  renderSidebar(q);
}

function renderSidebar(query = '') {
  document.getElementById('count-notes').textContent = Object.keys(state.notes).length;
  let notes = allNotes();
  if (query) {
    const lq = query.toLowerCase();
    notes = notes.filter(n =>
      n.title.toLowerCase().includes(lq) || (n.content || '').toLowerCase().includes(lq)
    );
  }
  const list = document.getElementById('note-list');
  if (notes.length === 0) {
    list.innerHTML = `<div style="padding:20px 14px;color:var(--text-3);font-size:12px;font-family:var(--mono)">Keine Notizen</div>`;
    return;
  }
  list.innerHTML = notes.map(n => {
    const preview = (n.content || '').replace(/#+\s/g,'').replace(/\*+/g,'').replace(/\[+[^\]]*\]+/g,'').slice(0, 60);
    const date = n.updatedAt ? formatDate(n.updatedAt) : '';
    return `
      <div class="note-item${state.activeNoteId === n.id ? ' active' : ''}" onclick="openNote('${n.id}')">
        <div class="note-item-title">${escHtml(n.title)}</div>
        ${preview ? `<div class="note-item-preview">${escHtml(preview)}</div>` : ''}
        <div class="note-item-date">${date}</div>
        <button class="del-btn" onclick="event.stopPropagation();deleteNote('${n.id}')" title="Löschen">×</button>
      </div>
    `;
  }).join('');
}

// ─── MARKDOWN + WIKI-LINKS ───────────────────
function parseMarkdown(text) {
  // Wiki links first (before other processing)
  text = text.replace(/\[\[([^\]]+)\]\]/g, (match, title) => {
    const existing = Object.values(state.notes).find(n => n.title.toLowerCase() === title.toLowerCase());
    const cls = existing ? 'wiki-link' : 'wiki-link new-note';
    const id = existing ? existing.id : '';
    return `<a class="${cls}" data-note-id="${id}" data-note-title="${escHtml(title)}" onclick="wikiClick(this)">${escHtml(title)}</a>`;
  });

  // Headings
  text = text.replace(/^### (.+)$/gm, '<h3>$1</h3>');
  text = text.replace(/^## (.+)$/gm, '<h2>$1</h2>');
  text = text.replace(/^# (.+)$/gm, '<h1>$1</h1>');

  // Code blocks
  text = text.replace(/```([\s\S]*?)```/g, '<pre><code>$1</code></pre>');

  // Inline code
  text = text.replace(/`([^`]+)`/g, '<code>$1</code>');

  // Bold, italic
  text = text.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
  text = text.replace(/\*(.+?)\*/g, '<em>$1</em>');

  // HR
  text = text.replace(/^---$/gm, '<hr>');

  // Blockquote
  text = text.replace(/^> (.+)$/gm, '<blockquote>$1</blockquote>');

  // Unordered list
  text = text.replace(/^[-*] (.+)$/gm, '<li>$1</li>');
  text = text.replace(/(<li>.*<\/li>\n?)+/g, s => '<ul>' + s + '</ul>');

  // Ordered list
  text = text.replace(/^\d+\. (.+)$/gm, '<li>$1</li>');

  // Links
  text = text.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank">$1</a>');

  // Paragraphs — wrap remaining lines
  const lines = text.split('\n');
  const out = [];
  let inBlock = false;
  for (let line of lines) {
    if (/^<(h[1-6]|ul|ol|pre|blockquote|hr|li)/.test(line) || line === '') {
      if (inBlock) { out.push('</p>'); inBlock = false; }
      out.push(line);
    } else {
      if (!inBlock) { out.push('<p>'); inBlock = true; }
      out.push(line);
    }
  }
  if (inBlock) out.push('</p>');
  return out.join('\n');
}

function updatePreview() {
  const content = document.getElementById('md-editor').value;
  if (state.activeNoteId) {
    state.notes[state.activeNoteId].content = content;
    state.notes[state.activeNoteId].updatedAt = Date.now();
  }
  document.getElementById('md-preview').innerHTML = parseMarkdown(content);
  saveLocal();
  renderSidebar();
  updateBacklinks();
}

function wikiClick(el) {
  const id = el.dataset.noteId;
  const title = el.dataset.noteTitle;
  if (id && state.notes[id]) {
    openNote(id);
  } else {
    // Create note with this title and open
    createNewNote(title);
  }
}

// ─── BACKLINKS ───────────────────────────────
function updateBacklinks() {
  if (!state.activeNoteId) return;
  const currentTitle = (state.notes[state.activeNoteId]?.title || '').toLowerCase();
  const linked = Object.values(state.notes).filter(n => {
    if (n.id === state.activeNoteId) return false;
    const wikiLinks = [...(n.content || '').matchAll(/\[\[([^\]]+)\]\]/g)].map(m => m[1].toLowerCase());
    return wikiLinks.includes(currentTitle);
  });

  const list = document.getElementById('backlinks-list');
  if (linked.length === 0) {
    list.innerHTML = `<div style="padding:12px;color:var(--text-3);font-size:11px;font-family:var(--mono)">Keine Rückverlinkungen</div>`;
    return;
  }
  list.innerHTML = linked.map(n =>
    `<div class="bl-item" onclick="openNote('${n.id}')">
      <span class="bl-arrow">←</span>${escHtml(n.title)}
    </div>`
  ).join('');
}

function toggleBacklinks() {
  state.backlinksVisible = !state.backlinksVisible;
  document.getElementById('backlinks-panel').classList.toggle('visible', state.backlinksVisible);
  document.getElementById('bl-btn').style.color = state.backlinksVisible ? 'var(--red)' : '';
  updateBacklinks();
}

// ─── SPLIT VIEW ──────────────────────────────
function toggleSplit() {
  state.splitView = !state.splitView;
  document.getElementById('editor-body').classList.toggle('split', state.splitView);
  document.getElementById('split-btn').style.color = state.splitView ? 'var(--red)' : '';
  if (state.splitView) updatePreview();
}

// ─── EDITOR HELPERS ──────────────────────────
function wrapSelection(before, after) {
  const ta = document.getElementById('md-editor');
  const s = ta.selectionStart, e = ta.selectionEnd;
  const sel = ta.value.slice(s, e);
  ta.setRangeText(before + sel + after, s, e, 'end');
  ta.focus();
  updatePreview();
}

function insertLine(prefix) {
  const ta = document.getElementById('md-editor');
  const s = ta.selectionStart;
  const lineStart = ta.value.lastIndexOf('\n', s - 1) + 1;
  ta.setRangeText(prefix, lineStart, lineStart, 'start');
  ta.focus();
  updatePreview();
}

function insertWikiLink() {
  const ta = document.getElementById('md-editor');
  const s = ta.selectionStart;
  const sel = ta.value.slice(s, ta.selectionEnd);
  ta.setRangeText('[[' + (sel || '') + ']]', s, ta.selectionEnd, 'end');
  ta.focus();
  showAutocomplete('');
}

// ─── AUTOCOMPLETE FOR [[…]] ──────────────────
let acActive = false;
let acQuery = '';
let acStart = -1;
let acSelected = 0;

document.addEventListener('DOMContentLoaded', () => {
  const ta = document.getElementById('md-editor');

  ta.addEventListener('input', () => {
    updatePreview();
    checkForWikiLink();
  });

  ta.addEventListener('keydown', e => {
    if (!acActive) return;
    const items = document.querySelectorAll('.ac-item');
    if (e.key === 'ArrowDown') { e.preventDefault(); acSelected = Math.min(acSelected + 1, items.length - 1); highlightAC(); }
    else if (e.key === 'ArrowUp') { e.preventDefault(); acSelected = Math.max(acSelected - 1, 0); highlightAC(); }
    else if (e.key === 'Enter' || e.key === 'Tab') {
      e.preventDefault();
      const sel = document.querySelector('.ac-item.selected');
      if (sel) sel.click();
    } else if (e.key === 'Escape') closeAutocomplete();
  });

  ta.addEventListener('blur', () => setTimeout(closeAutocomplete, 200));
});

function checkForWikiLink() {
  const ta = document.getElementById('md-editor');
  const pos = ta.selectionStart;
  const before = ta.value.slice(0, pos);
  const m = before.match(/\[\[([^\]\n]*)$/);
  if (m) {
    acStart = before.length - m[0].length;
    acQuery = m[1];
    showAutocomplete(acQuery);
  } else {
    closeAutocomplete();
  }
}

function showAutocomplete(query) {
  acActive = true;
  acSelected = 0;
  const notes = allNotes();
  const lq = query.toLowerCase();
  let matches = notes.filter(n => n.id !== state.activeNoteId && n.title.toLowerCase().includes(lq));

  const el = document.getElementById('autocomplete');
  const items = document.getElementById('ac-items');

  const exactMatch = notes.some(n => n.title.toLowerCase() === lq);
  const createRow = (!exactMatch && query.trim())
    ? `<div class="ac-item create-new" onclick="acSelectCreate('${escHtml(query.trim())}')">
         <span class="ac-icon">+</span> «${escHtml(query.trim())}» erstellen
       </div>` : '';

  items.innerHTML = matches.slice(0, 8).map((n, i) =>
    `<div class="ac-item${i === 0 ? ' selected' : ''}" onclick="acSelect('${n.id}')">
       <span class="ac-icon">◈</span>${escHtml(n.title)}
     </div>`
  ).join('') + createRow;

  if (items.children.length === 0) { closeAutocomplete(); return; }

  // Position near cursor
  const ta = document.getElementById('md-editor');
  const coords = getCaretCoords(ta);
  el.style.left = coords.x + 'px';
  el.style.top = (coords.y + 20) + 'px';
  el.classList.add('visible');
}

function highlightAC() {
  document.querySelectorAll('.ac-item').forEach((el, i) =>
    el.classList.toggle('selected', i === acSelected)
  );
}

function acSelect(noteId) {
  const note = state.notes[noteId];
  if (!note) return;
  completeWikiLink(note.title);
}

function acSelectCreate(title) {
  completeWikiLink(title);
  // Create the note immediately
  if (!Object.values(state.notes).find(n => n.title.toLowerCase() === title.toLowerCase())) {
    const id = generateId();
    state.notes[id] = { id, title, content: '', updatedAt: Date.now() };
    saveLocal();
    renderSidebar();
  }
}

function completeWikiLink(title) {
  const ta = document.getElementById('md-editor');
  const pos = ta.selectionStart;
  const before = ta.value.slice(0, pos);
  const m = before.match(/\[\[([^\]\n]*)$/);
  if (!m) return closeAutocomplete();

  const startIdx = before.length - m[0].length;
  const endIdx = pos;
  const after = ta.value.slice(endIdx);
  // Remove closing ]] if already typed
  const cleanAfter = after.startsWith(']]') ? after.slice(2) : after;
  ta.value = ta.value.slice(0, startIdx) + '[[' + title + ']]' + cleanAfter;
  const newPos = startIdx + title.length + 4;
  ta.setSelectionRange(newPos, newPos);
  ta.focus();
  closeAutocomplete();
  updatePreview();
}

function closeAutocomplete() {
  acActive = false;
  document.getElementById('autocomplete').classList.remove('visible');
}

// Rough caret position estimation
function getCaretCoords(el) {
  const rect = el.getBoundingClientRect();
  return { x: rect.left + 20, y: rect.top + 40 };
}

// ─── MISC HELPERS ────────────────────────────
function handleNew() {
  if (state.activeTab === 'notes') createNewNote();
  else document.getElementById('new-todo-input').focus();
}

function escHtml(str) {
  return (str || '').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

function formatDate(ts) {
  const d = new Date(ts);
  const now = new Date();
  if (d.toDateString() === now.toDateString()) return d.toLocaleTimeString('de', {hour:'2-digit',minute:'2-digit'});
  return d.toLocaleDateString('de', {day:'2-digit', month:'2-digit'});
}

// ─── KEYBOARD ────────────────────────────────
document.addEventListener('keydown', e => {
  if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.isContentEditable) return;
  if (e.key === 'n' || e.key === 'N') handleNew();
});

// ─── INIT ────────────────────────────────────
const HARDCODED_CLIENT_ID = '368244766898-da615t6bjr0q8lr0ujvqa362dd3c999q.apps.googleusercontent.com';

function render() {
  renderTodos();
  renderSidebar();
}

loadLocal();
state.driveClientId = HARDCODED_CLIENT_ID;
localStorage.setItem('drive_client_id', HARDCODED_CLIENT_ID);
render();

// Handle OAuth redirect
const hash = new URLSearchParams(location.hash.slice(1));
if (hash.get('access_token')) {
  state.driveToken = hash.get('access_token');
  history.replaceState(null, '', location.pathname);
  driveLoad();
}

// Pre-fill modal & show connect hint
document.getElementById('client-id-input').value = HARDCODED_CLIENT_ID;
if (!state.driveToken) {
  setSyncStatus('');
  // Show subtle connect hint in sync label
  document.getElementById('sync-label').textContent = '☁ verbinden';
}
</script>
</body>
</html>
